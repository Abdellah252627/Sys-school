# دليل المطور

## جدول المحتويات
1. [المقدمة](#المقدمة)
2. [إعداد بيئة التطوير](#إعداد-بيئة-التطوير)
3. [هيكل المشروع](#هيكل-المشروع-1)
4. [قواعد الترميز](#قواعد-الترميز)
5. [إضافة ميزة جديدة](#إضافة-ميزة-جديدة)
6. [اختبار الكود](#اختبار-الكود)
7. [إرسال التغييرات](#إرسال-التغييرات)
8. [توثيق API](#توثيق-api)

## المقدمة

مرحباً بك في دليل مطوري نظام إدارة المدارس! هذا الدليل سيساعدك على فهم بنية المشروع وكيفية المساهمة فيه.

## إعداد بيئة التطوير

### المتطلبات الأساسية
- Node.js 14.x أو أحدث
- npm 6.x أو أحدث
- Git
- محرر نصوص (مثل VS Code)

### خطوات الإعداد

1. استنساخ المستودع:
   ```bash
   git clone https://github.com/Abdellah252627/Sys-school.git
   cd Sys-school
   ```

2. تثبيت التبعيات:
   ```bash
   npm install
   ```

3. إعداد ملف البيئة:
   ```bash
   cp .env.example .env
   ```
   قم بتعديل ملف `.env` حسب الحاجة.

4. تشغيل خادم التطوير:
   ```bash
   npm run dev
   ```

## هيكل المشروع

```
school-management-system/
├── config/           # إعدادات التطبيق
│   ├── database.js   # إعدادات قاعدة البيانات
│   └── passport.js   # إعدادات المصادقة
├── controllers/      # معالجات الطلبات
├── db/               # ملفات قاعدة البيانات
│   ├── migrations/   # ترحيلات قاعدة البيانات
│   └── seeds/        # بيانات تجريبية
├── middleware/       # وسائط Express
├── models/           # نماذج البيانات
├── public/           # ملفات ثابتة
│   ├── css/         # أنماط CSS
│   ├── js/          # سكريبتات الجافاسكريبت
│   ├── uploads/     # الملفات المرفوعة
│   └── img/         # الصور
├── routes/           # مسارات التطبيق
├── utils/            # أدوات مساعدة
└── views/            # قوالب العرض (Pug)
```

## قواعد الترميز

### تسمية المتغيرات والوظائف
- استخدم `camelCase` للمتغيرات والوظائف
- استخدم `PascalCase` للكلاسات والمكونات
- استخدم `UPPER_CASE` للثوابت
- استخدم أسماء توضح الغرض من المتغير أو الوظيفة

### التنسيق
- استخدم مسافتين للمسافات البادئة
- استخدم فواصل منقوطة في نهاية العبارات
- استخدم أقواس معقوفة للأغراض
- اكتب تعليقات توضيحية للكود المعقد

### Git
- اكتب رسائل commit واضحة وموجزة
- استخدم الأفعال المبني للمعلوم (مثل "أضف"، "أصلح"، "حسن")
- اكتب رسائل commit باللغة الإنجليزية

## إضافة ميزة جديدة

1. أنشئ فرعاً جديداً:
   ```bash
   git checkout -b feature/feature-name
   ```

2. أضف التغييرات:
   ```bash
   # مثال لإضافة ملف جديد
   touch controllers/newFeature.js
   
   # أو تعديل ملف موجود
   code existingFile.js
   ```

3. تأكد من أن الكود يتبع معايير الترميز

4. أضف الاختبارات اللازمة

5. احفظ التغييرات:
   ```bash
   git add .
   git commit -m "أضف: وصف للتغييرات"
   ```

## اختبار الكود

### تشغيل الاختبارات
```bash
npm test
```

### تغطية الاختبارات
```bash
npm run test:coverage
```

### فحص جودة الكود
```bash
npm run lint
```

## إرسال التغييرات

1. ادفع التغييرات إلى الفرع:
   ```bash
   git push origin feature/feature-name
   ```

2. افتح طلب سحب (Pull Request) على GitHub

3. انتظر مراجعة الكود من الفريق

4. بعد الموافقة، سيتم دمج التغييرات مع الفرع الرئيسي

## توثيق API

يتم توثيق واجهة برمجة التطبيقات (API) باستخدام Swagger. يمكنك الوصول إلى التوثيق على:

```
http://localhost:3000/api-docs
```

### إضافة نقطة نهاية (endpoint) جديدة

1. أضف المسار في المجلد المناسب داخل مجلد `routes/`
2. أضف معالج الطلب في المجلد المناسب داخل مجلد `controllers/`
3. أضف التوثيق باستخدام JSDoc:

```javascript
/**
 * @swagger
 * /api/students:
 *   get:
 *     summary: الحصول على قائمة الطلاب
 *     tags: [الطلاب]
 *     responses:
 *       200:
 *         description: قائمة الطلاب
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Student'
 */
router.get('/', studentController.getAllStudents);
```

## المساهمة في التوثيق

نرحب بمساهماتك في تحسين التوثيق. يمكنك المساعدة عن طريق:

1. تحديث الدلائل الحالية
2. إضافة أمثلة للكود
3. تحسين وضوح الوثائق
4. إضافة دروس تعليمية

## المساعدة والدعم

إذا واجهتك أي مشاكل أو لديك أسئلة:

1. ابحث في [قضايا GitHub](https://github.com/Abdellah252627/Sys-school/issues)
2. إذا لم تجد حلاً، افتح issue جديداً
3. يمكنك أيضاً التواصل مع الفريق عبر البريد الإلكتروني: dev@schoolsys.com
